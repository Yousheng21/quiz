{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _Transition = _interopRequireDefault(require(\"../Animation/Transition\"));\n\nvar _utils = require(\"../utils\");\n\nvar _prefix = require(\"../utils/prefix\");\n\nvar _Message = _interopRequireDefault(require(\"./Message\"));\n\nvar id = 0;\n\nvar getUid = function getUid() {\n  id += 1;\n  return (0, _prefix.defaultClassPrefix)(\"notification-\" + Date.now() + \"-\" + id);\n};\n\nvar NoticeManager = /*#__PURE__*/function (_React$Component) {\n  (0, _inheritsLoose2.default)(NoticeManager, _React$Component);\n\n  NoticeManager.getInstance = function getInstance(props, callback) {\n    var getContainer = props.getContainer,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(props, [\"getContainer\"]);\n    var mountElement = document.createElement('div');\n    var container = typeof getContainer === 'function' ? getContainer() : document.body;\n    container.appendChild(mountElement);\n    var called = false;\n\n    function ref(ref) {\n      if (called) {\n        return;\n      }\n\n      var instance = {\n        push: function push(item) {\n          ref.add(item);\n        },\n        remove: function remove(key) {\n          ref.actualRemove(key);\n        },\n        removeAll: function removeAll() {\n          ref.removeAll();\n        },\n        component: ref,\n        destroy: function destroy() {\n          _reactDom.default.unmountComponentAtNode(mountElement);\n\n          document.removeChild(mountElement);\n        }\n      };\n      called = true;\n      callback(instance);\n    }\n\n    _reactDom.default.render(React.createElement(NoticeManager, (0, _extends2.default)({}, rest, {\n      ref: ref\n    })), mountElement);\n  };\n\n  function NoticeManager(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _this.add = function (item) {\n      var notices = _this.state.notices;\n      item.key = typeof item.key === 'undefined' ? getUid() : item.key;\n      item.show = true;\n\n      if (!notices.find(function (n) {\n        return n.key === item.key;\n      })) {\n        _this.setState({\n          notices: [].concat(notices, [item])\n        });\n      }\n    };\n\n    _this.removeAll = function () {\n      var notices = _this.state.notices;\n\n      _this.setState({\n        notices: notices.map(function (n) {\n          return (0, _extends2.default)({}, n, {\n            show: false\n          });\n        })\n      }, function () {\n        setTimeout(function () {\n          var notices = _this.state.notices.filter(function (notice) {\n            return notice.show === true;\n          });\n\n          _this.setState({\n            notices: notices\n          });\n        }, 1000);\n      });\n    };\n\n    _this.remove = function (key) {\n      var notices = _this.state.notices;\n      key = _this.getKey(key);\n      var nextNotices = notices.map(function (n) {\n        if (n.key === key) {\n          n.show = false;\n        }\n\n        return n;\n      });\n\n      var callback = function callback() {\n        setTimeout(function () {\n          _this.actualRemove(key);\n        }, 1000);\n      };\n\n      _this.setState({\n        notices: nextNotices\n      }, callback);\n    };\n\n    _this.actualRemove = function (key) {\n      key = _this.getKey(key);\n\n      _this.setState(function (prevState) {\n        return {\n          notices: prevState.notices.filter(function (notice) {\n            return notice.key !== key;\n          })\n        };\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return (0, _utils.prefix)(_this.props.classPrefix)(name);\n    };\n\n    _this.state = {\n      show: false,\n      notices: []\n    };\n    return _this;\n  }\n\n  var _proto = NoticeManager.prototype;\n\n  _proto.getKey = function getKey(key) {\n    var notices = this.state.notices;\n\n    if (typeof key === 'undefined' && notices.length) {\n      key = notices[notices.length - 1].key;\n    }\n\n    return key;\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var notices = this.state.notices;\n    var _this$props = this.props,\n        className = _this$props.className,\n        style = _this$props.style,\n        classPrefix = _this$props.classPrefix;\n    var elements = notices.map(function (item) {\n      var key = item.key,\n          show = item.show,\n          onClose = item.onClose,\n          itemClassName = item.className,\n          itemRest = (0, _objectWithoutPropertiesLoose2.default)(item, [\"key\", \"show\", \"onClose\", \"className\"]);\n      return React.createElement(_Transition.default, {\n        key: key,\n        in: show,\n        exitedClassName: _this2.addPrefix('fade-exited'),\n        exitingClassName: _this2.addPrefix('fade-leave-active'),\n        enteringClassName: _this2.addPrefix('fade-entering'),\n        enteredClassName: _this2.addPrefix('fade-entered'),\n        timeout: 300\n      }, function (props, ref) {\n        var transitionClassName = props.className,\n            rest = (0, _objectWithoutPropertiesLoose2.default)(props, [\"className\"]);\n        return React.createElement(_Message.default, (0, _extends2.default)({}, itemRest, rest, {\n          className: (0, _classnames.default)(itemClassName, transitionClassName),\n          htmlElementRef: ref,\n          classPrefix: classPrefix,\n          onClose: (0, _utils.createChainedFunction)(function () {\n            return _this2.remove(key);\n          }, onClose)\n        }));\n      });\n    });\n    var classes = (0, _classnames.default)(classPrefix, className);\n    return React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, elements);\n  };\n\n  return NoticeManager;\n}(React.Component);\n\nNoticeManager.defaultProps = {\n  style: {\n    top: 5\n  }\n};\nvar _default = NoticeManager;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["F:/Myproject/node1/client/node_modules/rsuite/lib/Notification/NoticeManager.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","exports","__esModule","default","_extends2","_objectWithoutPropertiesLoose2","_inheritsLoose2","React","_reactDom","_classnames","_Transition","_utils","_prefix","_Message","id","getUid","defaultClassPrefix","Date","now","NoticeManager","_React$Component","getInstance","props","callback","getContainer","rest","mountElement","document","createElement","container","body","appendChild","called","ref","instance","push","item","add","remove","key","actualRemove","removeAll","component","destroy","unmountComponentAtNode","removeChild","render","_this","call","notices","state","show","find","n","setState","concat","map","setTimeout","filter","notice","getKey","nextNotices","prevState","addPrefix","name","prefix","classPrefix","_proto","prototype","length","_this2","_this$props","className","style","elements","onClose","itemClassName","itemRest","in","exitedClassName","exitingClassName","enteringClassName","enteredClassName","timeout","transitionClassName","htmlElementRef","createChainedFunction","classes","Component","defaultProps","top","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _Transition = _interopRequireDefault(require(\"../Animation/Transition\"));\n\nvar _utils = require(\"../utils\");\n\nvar _prefix = require(\"../utils/prefix\");\n\nvar _Message = _interopRequireDefault(require(\"./Message\"));\n\nvar id = 0;\n\nvar getUid = function getUid() {\n  id += 1;\n  return (0, _prefix.defaultClassPrefix)(\"notification-\" + Date.now() + \"-\" + id);\n};\n\nvar NoticeManager =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(NoticeManager, _React$Component);\n\n  NoticeManager.getInstance = function getInstance(props, callback) {\n    var getContainer = props.getContainer,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(props, [\"getContainer\"]);\n    var mountElement = document.createElement('div');\n    var container = typeof getContainer === 'function' ? getContainer() : document.body;\n    container.appendChild(mountElement);\n    var called = false;\n\n    function ref(ref) {\n      if (called) {\n        return;\n      }\n\n      var instance = {\n        push: function push(item) {\n          ref.add(item);\n        },\n        remove: function remove(key) {\n          ref.actualRemove(key);\n        },\n        removeAll: function removeAll() {\n          ref.removeAll();\n        },\n        component: ref,\n        destroy: function destroy() {\n          _reactDom.default.unmountComponentAtNode(mountElement);\n\n          document.removeChild(mountElement);\n        }\n      };\n      called = true;\n      callback(instance);\n    }\n\n    _reactDom.default.render(React.createElement(NoticeManager, (0, _extends2.default)({}, rest, {\n      ref: ref\n    })), mountElement);\n  };\n\n  function NoticeManager(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _this.add = function (item) {\n      var notices = _this.state.notices;\n      item.key = typeof item.key === 'undefined' ? getUid() : item.key;\n      item.show = true;\n\n      if (!notices.find(function (n) {\n        return n.key === item.key;\n      })) {\n        _this.setState({\n          notices: [].concat(notices, [item])\n        });\n      }\n    };\n\n    _this.removeAll = function () {\n      var notices = _this.state.notices;\n\n      _this.setState({\n        notices: notices.map(function (n) {\n          return (0, _extends2.default)({}, n, {\n            show: false\n          });\n        })\n      }, function () {\n        setTimeout(function () {\n          var notices = _this.state.notices.filter(function (notice) {\n            return notice.show === true;\n          });\n\n          _this.setState({\n            notices: notices\n          });\n        }, 1000);\n      });\n    };\n\n    _this.remove = function (key) {\n      var notices = _this.state.notices;\n      key = _this.getKey(key);\n      var nextNotices = notices.map(function (n) {\n        if (n.key === key) {\n          n.show = false;\n        }\n\n        return n;\n      });\n\n      var callback = function callback() {\n        setTimeout(function () {\n          _this.actualRemove(key);\n        }, 1000);\n      };\n\n      _this.setState({\n        notices: nextNotices\n      }, callback);\n    };\n\n    _this.actualRemove = function (key) {\n      key = _this.getKey(key);\n\n      _this.setState(function (prevState) {\n        return {\n          notices: prevState.notices.filter(function (notice) {\n            return notice.key !== key;\n          })\n        };\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return (0, _utils.prefix)(_this.props.classPrefix)(name);\n    };\n\n    _this.state = {\n      show: false,\n      notices: []\n    };\n    return _this;\n  }\n\n  var _proto = NoticeManager.prototype;\n\n  _proto.getKey = function getKey(key) {\n    var notices = this.state.notices;\n\n    if (typeof key === 'undefined' && notices.length) {\n      key = notices[notices.length - 1].key;\n    }\n\n    return key;\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var notices = this.state.notices;\n    var _this$props = this.props,\n        className = _this$props.className,\n        style = _this$props.style,\n        classPrefix = _this$props.classPrefix;\n    var elements = notices.map(function (item) {\n      var key = item.key,\n          show = item.show,\n          onClose = item.onClose,\n          itemClassName = item.className,\n          itemRest = (0, _objectWithoutPropertiesLoose2.default)(item, [\"key\", \"show\", \"onClose\", \"className\"]);\n      return React.createElement(_Transition.default, {\n        key: key,\n        in: show,\n        exitedClassName: _this2.addPrefix('fade-exited'),\n        exitingClassName: _this2.addPrefix('fade-leave-active'),\n        enteringClassName: _this2.addPrefix('fade-entering'),\n        enteredClassName: _this2.addPrefix('fade-entered'),\n        timeout: 300\n      }, function (props, ref) {\n        var transitionClassName = props.className,\n            rest = (0, _objectWithoutPropertiesLoose2.default)(props, [\"className\"]);\n        return React.createElement(_Message.default, (0, _extends2.default)({}, itemRest, rest, {\n          className: (0, _classnames.default)(itemClassName, transitionClassName),\n          htmlElementRef: ref,\n          classPrefix: classPrefix,\n          onClose: (0, _utils.createChainedFunction)(function () {\n            return _this2.remove(key);\n          }, onClose)\n        }));\n      });\n    });\n    var classes = (0, _classnames.default)(classPrefix, className);\n    return React.createElement(\"div\", {\n      className: classes,\n      style: style\n    }, elements);\n  };\n\n  return NoticeManager;\n}(React.Component);\n\nNoticeManager.defaultProps = {\n  style: {\n    top: 5\n  }\n};\nvar _default = NoticeManager;\nexports.default = _default;\nmodule.exports = exports.default;"]},"metadata":{},"sourceType":"script"}